import{r as R,T as $,q as j,R as A,c as n,a as e,j as d,g as y,u as a,t as i,h as g,k as B,b as x,n as w,o as c,i as v}from"./app-65921241.js";import{_ as M}from"./FormInput-35f9159b.js";import{u as N,a as S}from"./ReCaptcha-55f58cbf.js";import{u as T}from"./useRtl-81ed5c2b.js";const F={class:"flex h-screen justify-center"},Z={class:"flex justify-center"},E={class:"w-[20em] mt-40"},L={class:"flex justify-center mb-5"},U=["src","alt"],q={key:1,class:"text-2xl mb-2"},z={class:"text-2xl text-center"},D={class:"text-center text-sm text-slate-500"},K={key:0,class:"text-sm bg-[green] text-white mb-2 py-2 px-1 text-center rounded"},P={key:1,class:"form-error text-[#b91c1c] text-xs"},G={class:"mt-6"},H={key:0,type:"submit",class:"rounded-md bg-primary px-3 py-3 text-sm text-white shadow-sm w-full"},I={key:1,type:"button",class:"rounded-md bg-primary px-3 py-3 text-sm text-white shadow-sm w-full flex justify-center"},Y={__name:"Forgot",props:["flash","config","companyConfig"],setup(b){const{rtlClass:k,isRtl:J}=T(),o=b,p=R(!1),r=$({email:null,recaptcha_response:null}),l=t=>{const s=o.config.find(m=>m.key===t);return s?s.value:""},C=async()=>{if(p.value=!0,l("recaptcha_active")==="1"){const t=await V();r.recaptcha_response=t}r.post("forgot-password",{preserveScroll:!0,onFinish:()=>{p.value=!1}})},V=()=>new Promise(t=>{grecaptcha.ready(()=>{grecaptcha.execute(l("recaptcha_site_key"),{action:"submit"}).then(s=>{t(s)})})});return j(()=>{l("recaptcha_active")==="1"&&N(l("recaptcha_site_key"))}),A(()=>{S(l("recaptcha_site_key"))}),(t,s)=>{var m,u,f,h;return c(),n("div",{class:w(a(k))},[e("div",F,[e("div",Z,[e("div",E,[e("div",L,[d(a(v),{href:"/"},{default:y(()=>[o.companyConfig.logo?(c(),n("img",{key:0,class:"max-w-[180px]",src:"/media/"+o.companyConfig.logo,alt:o.companyConfig.company_name},null,8,U)):(c(),n("h4",q,i(o.companyConfig.company_name),1))]),_:1})]),e("h1",z,i(t.$t("Reset password")),1),e("div",D,[g(i(t.$t("Remembered password?"))+" ",1),d(a(v),{href:"login",class:"text-sm text-primary-600 dark:text-primary-500 border-b hover:border-gray-500"},{default:y(()=>[g(i(t.$t("Login")),1)]),_:1})]),e("form",{onSubmit:s[1]||(s[1]=B(_=>C(),["prevent"])),class:"mt-5"},[(u=(m=o.flash)==null?void 0:m.status)!=null&&u.message?(c(),n("div",K,[e("span",null,i((h=(f=o.flash)==null?void 0:f.status)==null?void 0:h.message),1)])):x("",!0),d(M,{modelValue:a(r).email,"onUpdate:modelValue":s[0]||(s[0]=_=>a(r).email=_),name:t.$t("Email"),error:a(r).errors.email,type:"email",class:w("sm:col-span-6")},null,8,["modelValue","name","error"]),a(r).errors.recaptcha_response?(c(),n("div",P,i(a(r).errors.recaptcha_response),1)):x("",!0),e("div",G,[p.value?(c(),n("button",I,s[2]||(s[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"}),e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})])],-1)]))):(c(),n("button",H,i(t.$t("Send password reset link")),1))])],32)])])])],2)}}};export{Y as default};
