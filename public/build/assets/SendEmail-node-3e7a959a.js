import{m as p,r as j,L as C,q as M,c as v,j as a,u as n,a as e,t as c,h as x,n as N,k as T,b as A,o as b}from"./app-ec99bd87.js";import{u as U,b as q,c as y,d as _}from"./vue-flow-core-167591f5.js";import{_ as B}from"./FormSelect-797ad7ea.js";import{_ as P}from"./FormCheckbox-cce65c62.js";import{_ as i}from"./FormInput-1cb8ed95.js";import{_ as $}from"./FormTextArea-3ceaa938.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-47ec0313.js";import"./hidden-490c85f0.js";import"./use-text-value-9ae8c6ca.js";import"./use-outside-click-eba05427.js";import"./use-resolve-button-type-840eaf68.js";const F={class:"send-email-node"},H={class:"bg-white border-2 border-teal-200 rounded-lg p-4 shadow-sm w-[400px]",style:{"min-width":"400px"}},L={class:"flex items-center mb-3"},D={class:"flex items-center gap-2 flex-1"},I={class:"font-medium text-gray-900 text-sm"},O={class:"text-xs text-gray-600 mb-2"},W={class:"flex items-center justify-between text-xs"},Y={class:"flex items-center gap-1"},G={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},J={class:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto"},K={class:"space-y-4"},Q={class:"space-y-3"},R={class:"space-y-4"},X={class:"space-y-3"},Z={class:"space-y-3"},ee={class:"grid grid-cols-2 gap-3"},te={class:"grid grid-cols-2 gap-3"},oe={class:"grid grid-cols-2 gap-3"},se={class:"flex items-center"},le={__name:"SendEmail-node",props:{id:String,data:Object,selected:Boolean},setup(w){const d=w,{removeNodes:h}=U(),g=q(),r=p(()=>{var s;return((s=d.data)==null?void 0:s.config)||{}}),m=p(()=>{var s;return((s=d.data)==null?void 0:s.is_active)!==!1}),u=j(!1),V=p(()=>{const s=r.value;return s.subject?`Send Email: ${s.subject}`:"Send Email"}),o=C({config:{},is_active:!0}),S=()=>{const s=r.value||{};o.config={subject:s.subject||"",body:s.body||"",smtp_host:s.smtp_host||"",smtp_port:s.smtp_port||587,smtp_username:s.smtp_username||"",smtp_password:s.smtp_password||"",smtp_encryption:s.smtp_encryption||"tls",from_name:s.from_name||"",from_email:s.from_email||""},o.is_active=m.value,u.value=!0},f=()=>{u.value=!1},k=()=>{g.node.data={...g.node.data,actionType:"send_email",config:o.config,is_active:o.is_active},f()},E=()=>{confirm("Are you sure you want to delete this action?")&&h([d.id])};return M(()=>{}),(s,t)=>(b(),v("div",F,[a(n(_),{type:"target",position:n(y).Top,class:"w-3 h-3 !bg-teal-500"},null,8,["position"]),e("div",H,[e("div",L,[e("div",D,[t[10]||(t[10]=e("div",{class:"w-8 h-8 bg-slate-50 rounded-lg flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"text-teal-600"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})])],-1)),e("div",null,[e("h3",I,c(V.value),1)])]),e("div",{class:"flex items-center gap-1 ml-auto"},[e("button",{onClick:S,class:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Edit Action"},t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),e("button",{onClick:E,class:"p-1 text-red-400 hover:text-red-600 rounded",title:"Delete Action"},t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1)]))])]),e("div",O,[e("div",null,[t[13]||(t[13]=e("span",{class:"font-medium"},"Subject:",-1)),x(" "+c(r.value.subject),1)])]),e("div",W,[t[14]||(t[14]=e("span",{class:"text-gray-500"},"Action",-1)),e("div",Y,[e("span",{class:N([m.value?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","px-2 py-1 rounded-full text-xs"])},c(m.value?"Active":"Inactive"),3)])])]),a(n(_),{type:"source",position:n(y).Bottom,class:"w-3 h-3 !bg-teal-500"},null,8,["position"]),u.value?(b(),v("div",G,[e("div",J,[t[21]||(t[21]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Edit Send Email Action")],-1)),e("form",{onSubmit:T(k,["prevent"]),class:"p-6"},[e("div",K,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Configuration",-1)),e("div",Q,[e("div",R,[e("div",X,[t[15]||(t[15]=e("h4",{class:"text-xs font-medium text-gray-600 uppercase tracking-wide"},"Email Content",-1)),e("div",null,[a(i,{modelValue:o.config.subject,"onUpdate:modelValue":t[0]||(t[0]=l=>o.config.subject=l),label:"Subject",type:"text",required:""},null,8,["modelValue"])]),e("div",null,[a($,{modelValue:o.config.body,"onUpdate:modelValue":t[1]||(t[1]=l=>o.config.body=l),name:"Body",rows:"4",required:""},null,8,["modelValue"])])]),e("div",Z,[t[17]||(t[17]=e("h4",{class:"text-xs font-medium text-gray-600 uppercase tracking-wide"},"SMTP Settings",-1)),e("div",ee,[e("div",null,[a(i,{modelValue:o.config.smtp_host,"onUpdate:modelValue":t[2]||(t[2]=l=>o.config.smtp_host=l),label:"SMTP Host",type:"text",placeholder:"e.g., smtp.gmail.com",required:""},null,8,["modelValue"])]),e("div",null,[a(i,{modelValue:o.config.smtp_port,"onUpdate:modelValue":t[3]||(t[3]=l=>o.config.smtp_port=l),label:"SMTP Port",type:"number",placeholder:"587",required:""},null,8,["modelValue"])])]),e("div",te,[e("div",null,[a(i,{modelValue:o.config.smtp_username,"onUpdate:modelValue":t[4]||(t[4]=l=>o.config.smtp_username=l),label:"Username",type:"text",placeholder:"your-email@gmail.com",required:""},null,8,["modelValue"])]),e("div",null,[a(i,{modelValue:o.config.smtp_password,"onUpdate:modelValue":t[5]||(t[5]=l=>o.config.smtp_password=l),label:"Password",type:"password",placeholder:"App password or email password",required:""},null,8,["modelValue"])])]),e("div",oe,[e("div",null,[a(B,{modelValue:o.config.smtp_encryption,"onUpdate:modelValue":t[6]||(t[6]=l=>o.config.smtp_encryption=l),label:"Encryption",name:"Encryption",options:[{value:"tls",label:"TLS"},{value:"ssl",label:"SSL"},{value:"none",label:"None"}],required:""},null,8,["modelValue"])]),e("div",null,[a(i,{modelValue:o.config.from_name,"onUpdate:modelValue":t[7]||(t[7]=l=>o.config.from_name=l),label:"From Name",type:"text",placeholder:"Your Company Name",required:""},null,8,["modelValue"])])]),e("div",null,[a(i,{modelValue:o.config.from_email,"onUpdate:modelValue":t[8]||(t[8]=l=>o.config.from_email=l),label:"From Email",type:"email",placeholder:"noreply@yourdomain.com",required:""},null,8,["modelValue"]),t[16]||(t[16]=e("p",{class:"text-xs text-gray-500 mt-1"}," This must be a valid email address that you're authorized to send from through your SMTP provider. ",-1))])]),t[18]||(t[18]=e("div",{class:"bg-gray-50 border border-blue-200 rounded-lg p-3"},[e("p",{class:"text-xs text-gray-600 mb-1"},[e("strong",null,"What happens:"),x(" An email will be sent to the contact using the configured SMTP settings. ")]),e("p",{class:"text-xs text-gray-500"}," The email will be sent from the configured SMTP account to the contact's email address. ")],-1))])])]),e("div",se,[a(P,{modelValue:o.is_active,"onUpdate:modelValue":t[9]||(t[9]=l=>o.is_active=l),label:"Active",class:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"},null,8,["modelValue"])])]),e("div",{class:"flex justify-end space-x-3 mt-6"},[e("button",{type:"button",onClick:f,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Cancel "),t[20]||(t[20]=e("button",{type:"submit",class:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors"}," Save Changes ",-1))])],32)])])):A("",!0)]))}},xe=z(le,[["__scopeId","data-v-8abf49e6"]]);export{xe as default};
