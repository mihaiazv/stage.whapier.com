import{W as B,m as l,r as j,L as S,q as T,c as g,j as d,u as n,a as t,d as E,t as v,h as b,n as $,k as D,b as h,o as m}from"./app-65921241.js";import{u as z,b as H,c as _,d as y}from"./vue-flow-core-8afe8c6d.js";import{_ as I}from"./FormSelect-dc5c52c3.js";import{_ as q}from"./FormCheckbox-9555f354.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-db537bfe.js";import"./hidden-78d7e861.js";import"./use-text-value-dba16a17.js";import"./use-outside-click-e7d3b6c5.js";import"./use-resolve-button-type-567bcc7c.js";const L={class:"add-to-group-node"},P={class:"bg-white border-2 border-teal-200 rounded-lg p-4 shadow-sm w-[400px]",style:{"min-width":"400px"}},U={class:"flex items-center mb-3"},W={class:"flex items-center gap-2 flex-1"},O={class:"font-medium text-gray-900 text-sm"},J={class:"text-xs text-gray-600 mb-2"},K={class:"flex items-center justify-between text-xs"},Q={class:"flex items-center gap-1"},R={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},X={class:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto"},Y={class:"space-y-4"},Z={class:"space-y-3"},tt={key:0,class:"text-xs text-red-500 mt-1"},et={class:"flex items-center"},ot={__name:"AddToGroup-node",props:{id:String,data:Object,selected:Boolean},setup(w){const r=w,{removeNodes:k}=z(),x=H(),A=B("contactGroups",[]),c=l(()=>{var o;return((o=r.data)==null?void 0:o.config)||{}}),u=l(()=>{var o;return((o=r.data)==null?void 0:o.is_active)!==!1}),p=j(!1),i=l(()=>A||[]),N=l(()=>{const o=c.value;if(o.group_id){const e=i.value.find(a=>a.value==o.group_id);return e?`Add to ${e.label}`:`Add to Group (ID: ${o.group_id})`}return"Add to Group"}),s=S({config:{},is_active:!0}),V=o=>{if(!o)return"No group selected";const e=i.value.find(a=>a.value==o);return e?e.label:`Group ID: ${o}`},C=()=>{s.config={group_id:c.value.group_id||""},s.is_active=u.value,p.value=!0},f=()=>{p.value=!1},G=()=>{x.node.data={...x.node.data,actionType:"add_to_group",config:s.config,is_active:s.is_active},f()},M=()=>{confirm("Are you sure you want to delete this action?")&&k([r.id])};return T(()=>{}),(o,e)=>(m(),g("div",L,[d(n(y),{type:"target",position:n(_).Top,class:"w-3 h-3 !bg-teal-500"},null,8,["position"]),t("div",P,[t("div",U,[t("div",W,[e[2]||(e[2]=E('<div class="w-8 h-8 bg-slate-50 rounded-lg flex items-center justify-center" data-v-1218ac1d><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-teal-600" data-v-1218ac1d><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" data-v-1218ac1d></path><circle cx="9" cy="7" r="4" data-v-1218ac1d></circle><path d="M5 8h8" data-v-1218ac1d></path></svg></div>',1)),t("div",null,[t("h3",O,v(N.value),1)])]),t("div",{class:"flex items-center gap-1 ml-auto"},[t("button",{onClick:C,class:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Edit Action"},e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),t("button",{onClick:M,class:"p-1 text-red-400 hover:text-red-600 rounded",title:"Delete Action"},e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M3 6h18"}),t("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),t("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1)]))])]),t("div",J,[t("div",null,[e[5]||(e[5]=t("span",{class:"font-medium"},"Add to:",-1)),b(" "+v(V(c.value.group_id)),1)])]),t("div",K,[e[6]||(e[6]=t("span",{class:"text-gray-500"},"Action",-1)),t("div",Q,[t("span",{class:$([u.value?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","px-2 py-1 rounded-full text-xs"])},v(u.value?"Active":"Inactive"),3)])])]),d(n(y),{type:"source",position:n(_).Bottom,class:"w-3 h-3 !bg-teal-500"},null,8,["position"]),p.value?(m(),g("div",R,[t("div",X,[e[11]||(e[11]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Edit Add to Group Action")],-1)),t("form",{onSubmit:D(G,["prevent"]),class:"p-6"},[t("div",Y,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Configuration",-1)),t("div",Z,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Select Group",-1)),d(I,{modelValue:s.config.group_id,"onUpdate:modelValue":e[0]||(e[0]=a=>s.config.group_id=a),options:i.value,placeholder:"Select a group",required:""},null,8,["modelValue","options"]),i.value.length===0?(m(),g("div",tt," No groups available. Please check if groups exist. ")):h("",!0)]),e[8]||(e[8]=t("div",{class:"bg-gray-50 border border-blue-200 rounded-lg p-3"},[t("p",{class:"text-xs text-gray-600 mb-1"},[t("strong",null,"What happens:"),b(" The contact will be automatically added to the selected group. ")]),t("p",{class:"text-xs text-gray-500"}," If the contact is already in the group, no action will be taken. ")],-1))])]),t("div",et,[d(q,{modelValue:s.is_active,"onUpdate:modelValue":e[1]||(e[1]=a=>s.is_active=a),label:"Active",class:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"},null,8,["modelValue"])])]),t("div",{class:"flex justify-end space-x-3 mt-6"},[t("button",{type:"button",onClick:f,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Cancel "),e[10]||(e[10]=t("button",{type:"submit",class:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors"}," Save Changes ",-1))])],32)])])):h("",!0)]))}},gt=F(ot,[["__scopeId","data-v-1218ac1d"]]);export{gt as default};
