import{_ as D}from"./App-781bfd2a.js";import{o as r,c as u,j as s,g as e,h as n,t as l,F as $,e as O,f as y,n as C,a,b as _,u as g,i as A,l as j,x as T,r as R,O as L}from"./app-ec99bd87.js";import{_ as N}from"./AlertModal-572d2330.js";import{u as F}from"./useAlertModal-cb83e527.js";import{l as M}from"./index-615f951b.js";/* empty css              */import{_ as P}from"./Table-c6c7856a.js";import{T as S,a as Z,_ as h}from"./TableHeaderRowItem-aed84956.js";import{T as H,a as z,_ as b}from"./TableBodyRowItem-e895e408.js";import{_ as J}from"./Dropdown-5b2525b0.js";import{_ as U,a as k}from"./DropdownItem-fe8b943f.js";import"./Sidebar-d453dae8.js";import"./Menu-54b068a6.js";import"./Modal-d0025cfd.js";import"./transition-305ccfdd.js";import"./hidden-490c85f0.js";import"./use-outside-click-eba05427.js";import"./micro-task-89dcd6af.js";import"./ProfileModal-287eff18.js";import"./FormInput-1cb8ed95.js";import"./FormPhoneInput-ac975e44.js";/* empty css                      */import"./FormSelect-797ad7ea.js";import"./index-47ec0313.js";import"./use-text-value-9ae8c6ca.js";import"./use-resolve-button-type-840eaf68.js";import"./tabs-d5a2f7a4.js";import"./LangToggle-4298f482.js";import"./OrganizationModal-cc4eaaeb.js";import"./MobileSidebar-f6e40833.js";import"./pusher-74adb5c4.js";import"./useRtl-2177b02b.js";import"./Pagination-2fae968e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-tree-walker-2444464b.js";const I={class:"py-1 px-2 bg-gray-50 rounded-[5px] border border-dashed w-[20em] truncate text-xs"},Y={key:0,class:"py-1 rounded-[5px] text-xs px-3 bg-[#ebfdf4] text-[#38733f]"},q={key:1,class:"py-1 rounded-[5px] text-xs px-3 bg-[#fae6e6] text-[darkred]"},G={key:2,class:"py-1 rounded-[5px] text-xs px-3 bg-[#ddebf7] text-slate-700"},K={key:0,class:"bg-white rounded-xl"},Q={class:"p-4 py-8"},W={class:"text-center text-lg font-medium mb-4"},X={class:"flex justify-center"},tt={key:0},et={__name:"TemplateTable",props:{rows:{type:Object,required:!0}},emits:["delete"],setup(p,{emit:x}){const d=p,{isOpenAlert:w,openAlert:m,confirmAlert:c}=F(),V=async t=>{try{const i=await T.delete(`/templates/${t}`);if(i.status===200&&i.data.success){const o=d.rows.data.findIndex(f=>f.uuid===t);d.rows.data.splice(o,1)}M(i.data.message,{autoClose:3e3})}catch{}},B=t=>t===d.rows.data.length-1,v=t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),E=t=>{const o=JSON.parse(t).components.find(f=>f.type==="BODY");return o?o.text:"N/A"};return(t,i)=>(r(),u($,null,[s(P,{rows:p.rows},{default:e(()=>[s(S,null,{default:e(()=>[s(Z,null,{default:e(()=>[s(h,{position:"first"},{default:e(()=>[n(l(t.$t("Name")),1)]),_:1}),s(h,null,{default:e(()=>[n(l(t.$t("Category")),1)]),_:1}),s(h,null,{default:e(()=>[n(l(t.$t("Preview")),1)]),_:1}),s(h,null,{default:e(()=>[n(l(t.$t("Status")),1)]),_:1}),s(h,null,{default:e(()=>[n(l(t.$t("Last updated")),1)]),_:1}),s(h,{position:"last"})]),_:1})]),_:1}),s(H,null,{default:e(()=>[(r(!0),u($,null,O(p.rows.data,(o,f)=>(r(),y(z,{key:f,class:C(B(f)?"":"border-b")},{default:e(()=>[s(b,{position:"first"},{default:e(()=>[n(l(o.name),1)]),_:2},1024),s(b,{class:"hidden sm:table-cell"},{default:e(()=>[n(l(v(o.category)),1)]),_:2},1024),s(b,{class:"hidden sm:table-cell"},{default:e(()=>[a("div",I,l(E(o.metadata)),1)]),_:2},1024),s(b,null,{default:e(()=>[o.status=="APPROVED"?(r(),u("span",Y,l(t.$t(v(o.status))),1)):o.status=="REJECTED"?(r(),u("span",q,l(t.$t(v(o.status))),1)):(r(),u("span",G,l(t.$t(v(o.status))),1))]),_:2},1024),s(b,{class:"hidden sm:table-cell"},{default:e(()=>[n(l(o.updated_at),1)]),_:2},1024),s(b,{position:"last"},{default:e(()=>[s(J,{align:"right",class:"mt-2"},{items:e(()=>[s(U,null,{default:e(()=>[o.status=="APPROVED"||o.status=="REJECTED"||o.status=="PAUSED"?(r(),y(k,{key:0,href:"/templates/"+o.uuid},{default:e(()=>[n(l(t.$t("edit")),1)]),_:2},1032,["href"])):_("",!0),s(k,{as:"button",onClick:mt=>g(m)(o.uuid)},{default:e(()=>[n(l(t.$t("Delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:e(()=>[i[2]||(i[2]=a("button",{class:"inline-flex w-full justify-center rounded-md text-sm font-medium text-black hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"},[a("span",{class:"hover:bg-[#F6F7F9] hover:rounded-full w-[fit-content] p-2"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor",d:"M12 16a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m0-6a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2Z"})])])],-1))]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1},8,["rows"]),p.rows.data.length==0?(r(),u("div",K,[a("div",Q,[i[3]||(i[3]=a("div",{class:"flex justify-center mb-4"},[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"72",height:"72",viewBox:"0 0 32 32"},[a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"2",d:"M12 15h8m-8 4h8m8 5V11c0-1.105-.892-2-1.997-2H17c-2 0-2-3-5-3H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2Z"})])],-1)),a("h3",W,l(t.$t("You don't have any templates")),1),a("div",X,[s(g(A),{href:"/templates/create",class:"rounded-md px-3 py-2 text-sm hover:shadow-md text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 bg-primary",disabled:t.isLoading},{default:e(()=>[t.isLoading?_("",!0):(r(),u("span",tt,l(t.$t("Create template")),1))]),_:1},8,["disabled"])])])])):_("",!0),s(N,{modelValue:g(w),"onUpdate:modelValue":i[0]||(i[0]=o=>j(w)?w.value=o:null),onConfirm:i[1]||(i[1]=()=>g(c)(V)),label:t.$t("Delete row"),description:t.$t("Are you sure you want to delete this row? This action can not be undone")},null,8,["modelValue","label","description"])],64))}},st={class:"bg-white md:bg-inherit pt-0 px-4 md:pt-8 md:p-8 rounded-[5px] text-[#000] overflow-y-scroll capitalize"},at={class:"flex justify-between mt-8 md:mt-0"},ot={class:"text-xl mb-1"},lt={class:"mb-6 flex items-center text-sm leading-6 text-gray-600"},it={class:"ml-1 mt-1"},rt={class:"space-x-2 flex items-center"},nt=["disabled"],dt={key:0},ut={key:1,class:"text-slate-600 animate-spin",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Yt={__name:"Index",props:{rows:Object},setup(p){const x=p,d=R(!1),w=()=>{d.value=!0,T.get("/templates/sync").then(function(m){L.reload(),setTimeout(()=>{d.value=!1},1500)}).catch(function(m){d.value=!1})};return(m,c)=>(r(),y(D,null,{default:e(()=>[a("div",st,[a("div",at,[a("div",null,[a("h2",ot,l(m.$t("Message templates")),1),a("p",lt,[c[0]||(c[0]=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),a("span",it,l(m.$t("Add template")),1)])]),a("div",rt,[a("button",{onClick:w,class:C(["rounded-md px-3 py-2 text-sm text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 capitalize",d.value?"bg-gray-200":"bg-indigo-600 hover:bg-indigo-500 shadow-sm"]),disabled:d.value},[d.value?(r(),u("svg",ut,c[1]||(c[1]=[a("path",{fill:"currentColor",d:"M18.43 4.25a.76.76 0 0 0-.75.75v2.43l-.84-.84a7.24 7.24 0 0 0-12 2.78a.74.74 0 0 0 .46 1a.73.73 0 0 0 .25 0a.76.76 0 0 0 .71-.51a5.63 5.63 0 0 1 1.37-2.2a5.76 5.76 0 0 1 8.13 0l.84.84h-2.41a.75.75 0 0 0 0 1.5h4.24a.74.74 0 0 0 .75-.75V5a.75.75 0 0 0-.75-.75Zm.25 9.43a.76.76 0 0 0-1 .47a5.63 5.63 0 0 1-1.37 2.2a5.76 5.76 0 0 1-8.13 0l-.84-.84h2.47a.75.75 0 0 0 0-1.5H5.57a.74.74 0 0 0-.75.75V19a.75.75 0 0 0 1.5 0v-2.43l.84.84a7.24 7.24 0 0 0 12-2.78a.74.74 0 0 0-.48-.95Z"},null,-1)]))):(r(),u("span",dt,l(m.$t("Sync templates")),1))],10,nt),s(g(A),{href:"/templates/create",class:"md:block hidden rounded-md bg-indigo-600 px-3 py-2 text-sm text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:e(()=>[n(l(m.$t("Create template")),1)]),_:1})])]),s(et,{rows:x.rows},null,8,["rows"])])]),_:1}))}};export{Yt as default};
