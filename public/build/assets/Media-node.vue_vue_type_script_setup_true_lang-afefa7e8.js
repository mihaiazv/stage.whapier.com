import{D as W,r as m,G as _,q as X,o as y,c as T,j as a,u as s,a as l,f as Y,n as I,t as k,g as i,h as r,d as ee,b as te,w as le,v as oe}from"./app-ec99bd87.js";import{_ as se,E as ae}from"./ellipsis-890f742a.js";import{b as ne,u as ie,c as L,d as D}from"./vue-flow-core-167591f5.js";import{_ as R}from"./Menubar.vue_vue_type_script_setup_true_lang-ec85404e.js";import{_ as p}from"./MenubarItem.vue_vue_type_script_setup_true_lang-699e0e9e.js";import{_ as q}from"./MenubarContent.vue_vue_type_script_setup_true_lang-f6a44320.js";import{_ as z}from"./MenubarMenu.vue_vue_type_script_setup_true_lang-bdc29a82.js";import{_ as A}from"./MenubarTrigger.vue_vue_type_script_setup_true_lang-12fef5ef.js";import{_ as de}from"./FormInput-1cb8ed95.js";import{_ as ue}from"./FormSelect-797ad7ea.js";import re from"./FlowMedia-832bcc6f.js";const me={class:"rounded-sm border border-gray-200 bg-white p-3 shadow-md"},pe={class:"flex flex-col gap-y-2"},fe={class:"flex justify-between items-center"},ve={class:"flex gap-x-2"},ge={class:"flex flex-col gap-y-1"},ce={key:1,class:"text-base capitalize"},xe={key:0,class:"flex items-center gap-x-2 bg-red-500 text-white rounded-md px-2 py-2"},we={class:"rounded-md bg-muted"},be={class:"mb-4"},ye={class:"flex items-center justify-between mt-2 mb-2 space-x-4"},ke={class:"text-xs"},Ce={class:"flex items-center space-x-3"},$e={type:"button",class:"hover:bg-slate-100 bg-slate-100 rounded p-1 text-sm"},De=W({__name:"Media-node",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(H){var M,S,E;const x=H,C=m(x.data.title),P=m(x.data.uuid),$=m(null),f=m(((M=x.data.metadata)==null?void 0:M.fields.mediaType)||""),n=m(((S=x.data.metadata)==null?void 0:S.fields.caption)||""),g=m(((E=x.data.metadata)==null?void 0:E.fields.media)||[]),N=m("1098"),V=m("0"),h=m(!1),j=m([{value:"image",label:"Image"},{value:"video",label:"Video"},{value:"audio",label:"Audio"},{value:"document",label:"Document"}]),d=ne(),{removeNodes:F,nodes:U,addNodes:Z,removeEdges:O,edges:G}=ie();_(f,o=>{d.node.data.metadata.fields={...d.node.data.metadata.fields,type:"media",mediaType:o,caption:n,media:g}}),_(n,o=>{d.node.data.metadata.fields={...d.node.data.metadata.fields,type:"media",mediaType:f,caption:o,media:g}}),_(g,o=>{d.node.data.metadata.fields={...d.node.data.metadata.fields,type:"media",mediaType:f,caption:n,media:o}});function J(){G.value.filter(o=>o.source===d.id||o.target===d.id).forEach(o=>O(o.id)),F(d.id)}function K(){const{type:o,position:e,label:t,data:u}=d.node,c={id:(U.value.length+1).toString(),type:o,position:{x:e.x+100,y:e.y+100},label:t,data:u};Z(c)}const B=o=>{let e=parseInt(N.value),t=parseInt(n.value.length);t<=e?V.value=t:(n.value=n.value.slice(0,e),V.value=e)},v=o=>{const e=$.value;if(e&&n.value.indexOf(o)===-1){const t=e.selectionStart,u=e.selectionEnd;n.value=n.value.slice(0,t)+o+n.value.slice(u),setTimeout(()=>{e.setSelectionRange(t+o.length,t+o.length),e.focus()},0)}},Q=()=>{B()},b=o=>{const e=$.value,t=e.selectionStart,u=e.selectionEnd,c=n.value.slice(t,u);let w="";o=="bold"?w=n.value.slice(0,t)+"*"+c+"*"+n.value.slice(u):o=="italic"?w=n.value.slice(0,t)+"_"+c+"_"+n.value.slice(u):o=="strike-through"?w=n.value.slice(0,t)+"~"+c+"~"+n.value.slice(u):o=="monospace"&&(w=n.value.slice(0,t)+"```"+c+"```"+n.value.slice(u)),n.value=w,B(),setTimeout(()=>{o=="monospace"?e.setSelectionRange(t+3,u+3):e.setSelectionRange(t+1,u+1),e.focus()},0)};return X(()=>{B()}),(o,e)=>(y(),T("div",me,[a(s(D),{type:"target",position:s(L).Left},null,8,["position"]),l("div",pe,[l("div",fe,[l("div",ve,[e[17]||(e[17]=l("img",{src:se,class:"mt-1 h-4 w-4",alt:"LLM icon"},null,-1)),l("div",ge,[h.value?(y(),Y(de,{key:0,modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=t=>C.value=t),name:"",type:"text",class:I("col-span-4"),onBlur:e[1]||(e[1]=()=>h.value=!1)},null,8,["modelValue"])):(y(),T("h3",ce,k(C.value),1))])]),a(s(R),{class:"border-none"},{default:i(()=>[a(s(z),null,{default:i(()=>[a(s(A),null,{default:i(()=>[a(s(ae))]),_:1}),a(s(q),null,{default:i(()=>[a(s(p),{onClick:K},{default:i(()=>e[18]||(e[18]=[r(" Duplicated ")])),_:1}),a(s(p),{onClick:J},{default:i(()=>e[19]||(e[19]=[r(" Delete ")])),_:1}),a(s(p),{onClick:e[2]||(e[2]=t=>h.value=!0)},{default:i(()=>e[20]||(e[20]=[r(" Rename ")])),_:1})]),_:1})]),_:1})]),_:1})]),f.value==""||g.value.length==0?(y(),T("div",xe,e[21]||(e[21]=[ee('<span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"></path><path fill="currentColor" d="m13.299 3.148l8.634 14.954a1.5 1.5 0 0 1-1.299 2.25H3.366a1.5 1.5 0 0 1-1.299-2.25l8.634-14.954c.577-1 2.02-1 2.598 0M12 15a1 1 0 1 0 0 2a1 1 0 0 0 0-2m0-7a1 1 0 0 0-.993.883L11 9v4a1 1 0 0 0 1.993.117L13 13V9a1 1 0 0 0-1-1"></path></g></svg></span><span class="text-sm">Please fill all the required fields</span>',2)]))):te("",!0),e[35]||(e[35]=l("span",{class:"text-sm text-gray-500"},"Respond with an image, video, audio or document.",-1)),l("div",we,[l("div",be,[e[22]||(e[22]=l("label",{class:"text-sm mb-2"},[l("span",{class:"text-red-500"},"*"),r(" Media Type")],-1)),a(ue,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),name:"",type:"text",optionClassName:"h-32",options:j.value,class:I("col-span-4")},null,8,["modelValue","options"])]),l("div",null,[e[23]||(e[23]=l("label",{class:"text-sm mb-2"},"Caption (Optional)",-1)),le(l("textarea",{ref_key:"textAreaRef",ref:$,class:"block w-full rounded-md border-0 py-1.5 px-4 text-gray-900 shadow-sm outline-none ring-1 ring-inset placeholder:text-gray-400 sm:text-sm sm:leading-6 ring-gray-300","onUpdate:modelValue":e[4]||(e[4]=t=>n.value=t),onInput:Q,rows:"1",placeholder:"Enter text"},"          ",544),[[oe,n.value]])]),l("div",ye,[l("span",ke,k(o.$t("Characters"))+": "+k(V.value+"/"+N.value),1),l("div",Ce,[l("button",{onClick:e[5]||(e[5]=t=>b("bold")),class:"hover:bg-slate-100 rounded p-1"},e[24]||(e[24]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M5 3h8c1.06 0 2.078.474 2.828 1.318C16.578 5.162 17 6.307 17 7.5c0 1.193-.421 2.338-1.172 3.182C15.078 11.526 14.061 12 13 12H5zm0 9h10.039a4.44 4.44 0 0 1 3.154 1.318A4.52 4.52 0 0 1 19.5 16.5a4.52 4.52 0 0 1-1.307 3.182A4.442 4.442 0 0 1 15.038 21H5z"})],-1)])),l("button",{onClick:e[6]||(e[6]=t=>b("italic")),class:"hover:bg-slate-100 rounded p-1"},e[25]||(e[25]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M10 4.75a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-3.514l-5.828 13h3.342a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5h3.514l5.828-13H20.75a.75.75 0 0 1-.75-.75Z"})],-1)])),l("button",{onClick:e[7]||(e[7]=t=>b("strike-through")),class:"hover:bg-slate-100 rounded p-1"},e[26]||(e[26]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"m16.533 12.5l.054.043c.93.75 1.538 1.77 1.538 3.066a4.13 4.13 0 0 1-1.479 3.177c-1.058.904-2.679 1.464-4.974 1.464c-2.35 0-4.252-.837-5.318-1.865a.75.75 0 1 1 1.042-1.08c.747.722 2.258 1.445 4.276 1.445c2.065 0 3.296-.504 3.999-1.105a2.63 2.63 0 0 0 .954-2.036c0-.764-.337-1.38-.979-1.898c-.649-.523-1.598-.931-2.76-1.211H3.75a.75.75 0 0 1 0-1.5h26.5a.75.75 0 0 1 0 1.5ZM12.36 5C9.37 5 8.105 6.613 8.105 7.848c0 .411.072.744.193 1.02a.75.75 0 0 1-1.373.603a3.988 3.988 0 0 1-.32-1.623c0-2.363 2.271-4.348 5.755-4.348c1.931 0 3.722.794 4.814 1.5a.75.75 0 1 1-.814 1.26c-.94-.607-2.448-1.26-4-1.26Z"})],-1)])),l("button",{onClick:e[8]||(e[8]=t=>b("monospace")),class:"hover:bg-slate-100 rounded p-1"},e[27]||(e[27]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M13.5 6L10 18.5m-3.5-10L3 12l3.5 3.5m11-7L21 12l-3.5 3.5"})],-1)])),a(s(R),{class:"border-none"},{default:i(()=>[a(s(z),null,{default:i(()=>[a(s(A),null,{default:i(()=>[l("button",$e,k(o.$t("Add variable")),1)]),_:1}),a(s(q),null,{default:i(()=>[a(s(p),{onClick:e[9]||(e[9]=t=>v("{first_name}"))},{default:i(()=>e[28]||(e[28]=[r(" {first_name} ")])),_:1}),a(s(p),{onClick:e[10]||(e[10]=t=>v("{last_name}"))},{default:i(()=>e[29]||(e[29]=[r(" {last_name} ")])),_:1}),a(s(p),{onClick:e[11]||(e[11]=t=>v("{full_name}"))},{default:i(()=>e[30]||(e[30]=[r(" {full_name} ")])),_:1}),a(s(p),{onClick:e[12]||(e[12]=t=>v("{phone_number}"))},{default:i(()=>e[31]||(e[31]=[r(" {phone_number} ")])),_:1}),a(s(p),{onClick:e[13]||(e[13]=t=>v("{email}"))},{default:i(()=>e[32]||(e[32]=[r(" {email} ")])),_:1}),a(s(p),{onClick:e[14]||(e[14]=t=>v("{city}"))},{default:i(()=>e[33]||(e[33]=[r(" {city} ")])),_:1}),a(s(p),{onClick:e[15]||(e[15]=t=>v("{country}"))},{default:i(()=>e[34]||(e[34]=[r(" {country} ")])),_:1})]),_:1})]),_:1})]),_:1})])]),a(re,{modelValue:g.value,"onUpdate:modelValue":e[16]||(e[16]=t=>g.value=t),type:f.value,uuid:P.value,nodeId:s(d).id},null,8,["modelValue","type","uuid","nodeId"])])]),a(s(D),{type:"source",position:s(L).Right},null,8,["position"])]))}});export{De as _};
