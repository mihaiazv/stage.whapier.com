import{r as _,T as S,m as U,q as Z,R as D,c as n,a as t,j as d,g as k,u as a,t as l,h as C,b as V,k as $,n as c,o as i,i as A}from"./app-65921241.js";import{_ as p}from"./FormInput-35f9159b.js";import{u as z,a as E}from"./ReCaptcha-55f58cbf.js";import{u as F}from"./useRtl-81ed5c2b.js";const L={class:"flex h-screen justify-center"},P={class:"flex justify-center items-center"},G={key:0,class:"w-[25em]"},H={class:"flex justify-center mb-5"},I=["src","alt"],q={key:1,class:"text-2xl mb-2"},K={class:"text-2xl text-center"},O={key:0},Y={key:1},J={key:0,class:"text-center text-sm text-slate-500 mt-5"},Q={class:"mt-5 grid grid-cols-2 space-x-4"},W={class:""},X={class:""},ee={class:"mt-5"},te={class:"mt-5 grid grid-cols-2 space-x-4"},se={class:""},oe={class:""},ae={key:0,class:"form-error text-[#b91c1c] text-xs"},re={class:"mt-6"},ne={key:0,type:"submit",class:"rounded-md bg-primary px-3 py-3 text-sm text-white shadow-sm w-full"},ie={key:1,type:"button",class:"rounded-md bg-primary px-3 py-3 text-sm text-white shadow-sm w-full flex justify-center"},le={class:"mt-10"},me={key:0,type:"submit",class:"rounded-md bg-primary px-3 py-3 text-sm text-white shadow-sm w-full"},de={key:1,type:"button",class:"rounded-md bg-primary px-3 py-3 text-sm text-white shadow-sm w-full flex justify-center"},ce={key:1,class:"w-[25em]"},ue={class:"text-2xl text-center"},pe={class:"mt-10 text-center"},ve={__name:"Invite",props:["flash","config","organization","companyConfig","invite","user"],setup(T){var w,v,x,g;const{rtlClass:j,isRtl:fe}=F(),r=T,M=_((w=r.invite)==null?void 0:w.expire_at),B=_(new Date().toISOString()),f=_(!1),s=S({first_name:(v=r.user)==null?void 0:v.first_name,last_name:(x=r.user)==null?void 0:x.last_name,email:(g=r.invite)==null?void 0:g.email,password:null,password_confirmation:null,code:r.code,recaptcha_response:null}),u=o=>{const e=r.config.find(h=>h.key===o);return e?e.value:""};r.user&&delete s.password;const N=U(()=>{const o=new Date(M.value),e=new Date(B.value);return o<e}),y=async()=>{if(f.value=!0,u("recaptcha_active")==="1"){const o=await R();s.recaptcha_response=o}s.post("",{onSuccess:()=>s.reset(),onFinish:()=>{f.value=!1}})},R=()=>new Promise(o=>{grecaptcha.ready(()=>{grecaptcha.execute(u("recaptcha_site_key"),{action:"submit"}).then(e=>{o(e)})})});return Z(()=>{u("recaptcha_active")==="1"&&z(u("recaptcha_site_key"))}),D(()=>{E(u("recaptcha_site_key"))}),(o,e)=>{var h,b;return i(),n("div",{class:c(a(j))},[t("div",L,[t("div",P,[N.value?(i(),n("div",ce,[t("h1",ue,l(o.$t("This invite link has expired. Contact the account owner to send you another link")),1),t("div",pe,[d(a(A),{href:"/login",type:"button",class:"rounded-md bg-primary px-3 py-3 text-sm text-white shadow-sm w-full"},{default:k(()=>[C(l(o.$t("Go to login")),1)]),_:1})])])):(i(),n("div",G,[t("div",H,[d(a(A),{href:"/"},{default:k(()=>[r.companyConfig.logo?(i(),n("img",{key:0,class:"max-w-[180px]",src:"/media/"+r.companyConfig.logo,alt:r.companyConfig.company_name},null,8,I)):(i(),n("h4",q,l(r.companyConfig.company_name),1))]),_:1})]),t("h3",K,[r.user?(i(),n("span",O,l(o.$t("Hi"))+" "+l((h=r.user)==null?void 0:h.first_name),1)):(i(),n("span",Y,l(o.$t("Hi")),1)),C(", "+l(o.$t("You have been invited to join"))+" "+l((b=r==null?void 0:r.organization)==null?void 0:b.name),1)]),r.user?V("",!0):(i(),n("div",J,l(o.$t("Get started by entering your details below")),1)),r.user?(i(),n("form",{key:2,onSubmit:e[6]||(e[6]=$(m=>y(),["prevent"]))},[t("div",le,[f.value?(i(),n("button",de,e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"}),t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})])],-1)]))):(i(),n("button",me,l(o.$t("Proceed to join")),1))])],32)):(i(),n("form",{key:1,onSubmit:e[5]||(e[5]=$(m=>y(),["prevent"])),class:"mt-5"},[t("div",Q,[t("div",W,[d(p,{modelValue:a(s).first_name,"onUpdate:modelValue":e[0]||(e[0]=m=>a(s).first_name=m),name:o.$t("First name"),type:"text",error:a(s).errors.first_name,class:c("w-full"),labelClass:"mb-0"},null,8,["modelValue","name","error"])]),t("div",X,[d(p,{modelValue:a(s).last_name,"onUpdate:modelValue":e[1]||(e[1]=m=>a(s).last_name=m),name:o.$t("Last name"),type:"text",error:a(s).errors.last_name,class:c("w-full"),labelClass:"mb-0"},null,8,["modelValue","name","error"])])]),t("div",ee,[d(p,{modelValue:a(s).email,"onUpdate:modelValue":e[2]||(e[2]=m=>a(s).email=m),name:o.$t("Email"),type:"email",disabled:!0,error:a(s).errors.email,class:c("w-full"),labelClass:"mb-0"},null,8,["modelValue","name","error"])]),t("div",te,[t("div",se,[d(p,{modelValue:a(s).password,"onUpdate:modelValue":e[3]||(e[3]=m=>a(s).password=m),name:o.$t("Password"),type:"password",error:a(s).errors.password,class:c("w-full"),labelClass:"mb-0"},null,8,["modelValue","name","error"])]),t("div",oe,[d(p,{modelValue:a(s).password_confirmation,"onUpdate:modelValue":e[4]||(e[4]=m=>a(s).password_confirmation=m),name:o.$t("Confirm password"),type:"password",error:a(s).errors.password_confirmation,class:c("w-full")},null,8,["modelValue","name","error"])])]),a(s).errors.recaptcha_response?(i(),n("div",ae,l(a(s).errors.recaptcha_response),1)):V("",!0),t("div",re,[f.value?(i(),n("button",ie,e[7]||(e[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"}),t("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[t("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})])],-1)]))):(i(),n("button",ne,l(o.$t("Create account")),1))])],32))]))])])],2)}}};export{ve as default};
