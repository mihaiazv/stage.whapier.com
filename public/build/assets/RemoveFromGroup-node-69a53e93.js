import{W as B,m as l,r as R,L as j,q as S,c as m,j as r,u as n,a as e,d as E,t as v,h as b,n as $,k as F,b as h,o as g}from"./app-ec99bd87.js";import{u as D,b as T,c as _,d as y}from"./vue-flow-core-167591f5.js";import{_ as z}from"./FormSelect-797ad7ea.js";import{_ as H}from"./FormCheckbox-cce65c62.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-47ec0313.js";import"./hidden-490c85f0.js";import"./use-text-value-9ae8c6ca.js";import"./use-outside-click-eba05427.js";import"./use-resolve-button-type-840eaf68.js";const q={class:"remove-from-group-node"},L={class:"bg-white border-2 border-teal-200 rounded-lg p-4 shadow-sm w-[400px]",style:{"min-width":"400px"}},P={class:"flex items-center mb-3"},U={class:"flex items-center gap-2 flex-1"},W={class:"font-medium text-gray-900 text-sm"},O={class:"text-xs text-gray-600 mb-2"},J={class:"flex items-center justify-between text-xs"},K={class:"flex items-center gap-1"},Q={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},X={class:"bg-white rounded-lg max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto"},Y={class:"space-y-4"},Z={class:"space-y-3"},ee={key:0,class:"text-xs text-red-500 mt-1"},te={class:"flex items-center"},oe={__name:"RemoveFromGroup-node",props:{id:String,data:Object,selected:Boolean},setup(w){const d=w,{removeNodes:k}=D(),f=T(),N=B("contactGroups",[]),c=l(()=>{var o;return((o=d.data)==null?void 0:o.config)||{}}),u=l(()=>{var o;return((o=d.data)==null?void 0:o.is_active)!==!1}),p=R(!1),i=l(()=>N||[]),V=l(()=>{const o=c.value;if(o.group_id){const t=i.value.find(a=>a.value==o.group_id);return t?`Remove from ${t.label}`:`Remove from Group (ID: ${o.group_id})`}return"Remove from Group"}),s=j({config:{},is_active:!0}),C=o=>{if(!o)return"No group selected";const t=i.value.find(a=>a.value==o);return t?t.label:`Group ID: ${o}`},G=()=>{s.config={group_id:c.value.group_id||""},s.is_active=u.value,p.value=!0},x=()=>{p.value=!1},M=()=>{f.node.data={...f.node.data,actionType:"remove_from_group",config:s.config,is_active:s.is_active},x()},A=()=>{confirm("Are you sure you want to delete this action?")&&k([d.id])};return S(()=>{}),(o,t)=>(g(),m("div",q,[r(n(y),{type:"target",position:n(_).Top,class:"w-3 h-3 !bg-teal-500"},null,8,["position"]),e("div",L,[e("div",P,[e("div",U,[t[2]||(t[2]=E('<div class="w-8 h-8 bg-slate-50 rounded-lg flex items-center justify-center" data-v-e40bf313><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-teal-600" data-v-e40bf313><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" data-v-e40bf313></path><circle cx="9" cy="7" r="4" data-v-e40bf313></circle><path d="M5 8h8" data-v-e40bf313></path><path d="M5 12h8" data-v-e40bf313></path></svg></div>',1)),e("div",null,[e("h3",W,v(V.value),1)])]),e("div",{class:"flex items-center gap-1 ml-auto"},[e("button",{onClick:G,class:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Edit Action"},t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])),e("button",{onClick:A,class:"p-1 text-red-400 hover:text-red-600 rounded",title:"Delete Action"},t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1)]))])]),e("div",O,[e("div",null,[t[5]||(t[5]=e("span",{class:"font-medium"},"Remove from:",-1)),b(" "+v(C(c.value.group_id)),1)])]),e("div",J,[t[6]||(t[6]=e("span",{class:"text-gray-500"},"Action",-1)),e("div",K,[e("span",{class:$([u.value?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","px-2 py-1 rounded-full text-xs"])},v(u.value?"Active":"Inactive"),3)])])]),r(n(y),{type:"source",position:n(_).Bottom,class:"w-3 h-3 !bg-teal-500"},null,8,["position"]),p.value?(g(),m("div",Q,[e("div",X,[t[11]||(t[11]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Edit Remove from Group Action")],-1)),e("form",{onSubmit:F(M,["prevent"]),class:"p-6"},[e("div",Y,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Configuration",-1)),e("div",Z,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Select Group",-1)),r(z,{modelValue:s.config.group_id,"onUpdate:modelValue":t[0]||(t[0]=a=>s.config.group_id=a),options:i.value,placeholder:"Select a group",required:""},null,8,["modelValue","options"]),i.value.length===0?(g(),m("div",ee," No groups available. Please check if groups exist. ")):h("",!0)]),t[8]||(t[8]=e("div",{class:"bg-gray-50 border border-blue-200 rounded-lg p-3"},[e("p",{class:"text-xs text-gray-600 mb-1"},[e("strong",null,"What happens:"),b(" The contact will be automatically removed from the selected group. ")]),e("p",{class:"text-xs text-gray-500"}," If the contact is not in the group, no action will be taken. ")],-1))])]),e("div",te,[r(H,{modelValue:s.is_active,"onUpdate:modelValue":t[1]||(t[1]=a=>s.is_active=a),label:"Active",class:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"},null,8,["modelValue"])])]),e("div",{class:"flex justify-end space-x-3 mt-6"},[e("button",{type:"button",onClick:x,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Cancel "),t[10]||(t[10]=e("button",{type:"submit",class:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors"}," Save Changes ",-1))])],32)])])):h("",!0)]))}},me=I(oe,[["__scopeId","data-v-e40bf313"]]);export{me as default};
